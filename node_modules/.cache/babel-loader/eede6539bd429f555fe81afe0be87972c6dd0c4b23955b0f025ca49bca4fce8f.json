{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\Nueva carpeta (2)\\\\definitivo_signodePregunta\\\\WebDevelopment\\\\Proyecto\\\\arepasApp\\\\src\\\\components\\\\Store.js\",\n  _s = $RefreshSig$();\nimport Header from './Header';\nimport Main from './Main';\nimport Basket from './Basket';\nimport data from '../data';\nimport React, { useState, useEffect } from 'react';\nimport { helpFetch } from '../helpers/helpFetch';\nimport CrudTableProduct from '../components/crud/CrudTableProduct';\nimport CrudApiProducto from './crud/CrudApiProducto';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Store() {\n  _s();\n  const API = helpFetch();\n  const [editData, setEditData] = useState(null);\n  const [productsAPI, setProducts] = useState(['']);\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const {\n    products\n  } = data;\n  const [cartItems, setCartItems] = useState([]);\n  const [busqueda, setBusqueda] = useState(\"\");\n  const handleChange = e => {\n    setBusqueda(e.target.value);\n    filtrar(e.target.value);\n  };\n  const filtrar = terminoBusqueda => {\n    var resultadosBusqueda = productsAPI.filter(elemento => {\n      if (elemento.name.toString().toLowerCase().includes(terminoBusqueda.toLowerCase()) || elemento.price.toString().toLowerCase().includes(terminoBusqueda.toLowerCase())) {\n        return elemento;\n      }\n    });\n    setProducts(resultadosBusqueda);\n  };\n  const addProduct = product => {\n    setLoading(true);\n    const options = {\n      body: product\n    };\n    API.post(\"products\", options).then(response => {\n      if (!response.error) {\n        setProducts([...productsAPI, product]);\n        setErrorMessage(null);\n      } else {\n        setProducts(null);\n        setErrorMessage(response.statusText);\n      }\n      setLoading(false);\n    });\n  };\n\n  // editar un producto\n  const editProduct = product => {\n    setLoading(true);\n    const options = {\n      body: product\n    };\n    API.put(\"products\", options, product.id).then(response => {\n      if (!response.error) {\n        const newProducts = productsAPI.map(el => el.id === product.id ? product : el);\n        setProducts(newProducts);\n        setEditData(null);\n        setErrorMessage(null);\n      } else {\n        setProducts(null);\n        setErrorMessage(response.statusText);\n      }\n      setLoading(false);\n    });\n  };\n  // Eliminar un product\n  const deleteProduct = id => {\n    setLoading(true);\n    const isDelete = window.confirm(`¿Deseas eliminar el registro con id: ${id}?`);\n    if (isDelete) {\n      API.del(\"products\", id).then(response => {\n        if (!response.error) {\n          const newProducts = productsAPI.filter(el => el.id !== id);\n          setProducts(newProducts);\n          setErrorMessage(null);\n        } else {\n          setProducts(null);\n          setErrorMessage(response.statusText);\n        }\n        setLoading(false);\n      });\n    } else {\n      setLoading(false);\n    }\n  };\n  const onAdd = product => {\n    const exist = cartItems.find(x => x.id === product.id);\n    if (exist) {\n      setCartItems(cartItems.map(x => x.id === product.id ? {\n        ...exist,\n        qty: exist.qty + 1\n      } : x));\n    } else {\n      setCartItems([...cartItems, {\n        ...product,\n        qty: 1\n      }]);\n    }\n  };\n  const onRemove = product => {\n    const exist = cartItems.find(x => x.id === product.id);\n    if (exist.qty === 1) {\n      setCartItems(cartItems.filter(x => x.id !== product.id));\n    } else {\n      setCartItems(cartItems.map(x => x.id === product.id ? {\n        ...exist,\n        qty: exist.qty - 1\n      } : x));\n    }\n  };\n  useEffect(() => {\n    setLoading(true);\n    API.get(\"products\").then(response => {\n      if (!response.error) {\n        setProducts(response);\n        setErrorMessage(null);\n      } else {\n        setProducts(null);\n        setErrorMessage(response.statusText);\n      }\n      setLoading(false);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      countCartItems: cartItems.length\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      className: \"d-flex\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-control inputBuscar\",\n        value: busqueda,\n        placeholder: \"B\\xFAsqueda por nombre o precio\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(Basket, {\n        cartItems: cartItems,\n        onAdd: onAdd,\n        onRemove: onRemove\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CrudApiProducto, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 9\n  }, this);\n}\n_s(Store, \"12Fx3fnvGHya7hfW6yi3zsGFjv4=\");\n_c = Store;\nexport default Store;\nvar _c;\n$RefreshReg$(_c, \"Store\");","map":{"version":3,"names":["Header","Main","Basket","data","React","useState","useEffect","helpFetch","CrudTableProduct","CrudApiProducto","Button","Form","Store","API","editData","setEditData","productsAPI","setProducts","loading","setLoading","errorMessage","setErrorMessage","products","cartItems","setCartItems","busqueda","setBusqueda","handleChange","e","target","value","filtrar","terminoBusqueda","resultadosBusqueda","filter","elemento","name","toString","toLowerCase","includes","price","addProduct","product","options","body","post","then","response","error","statusText","editProduct","put","id","newProducts","map","el","deleteProduct","isDelete","window","confirm","del","onAdd","exist","find","x","qty","onRemove","get","length"],"sources":["C:/Users/Usuario/Desktop/Nueva carpeta (2)/definitivo_signodePregunta/WebDevelopment/Proyecto/arepasApp/src/components/Store.js"],"sourcesContent":["import Header from './Header';\r\nimport Main from './Main';\r\nimport Basket from './Basket';\r\nimport data from '../data';\r\nimport React, { useState, useEffect } from 'react'\r\nimport { helpFetch } from '../helpers/helpFetch'\r\nimport CrudTableProduct from '../components/crud/CrudTableProduct'\r\nimport CrudApiProducto from './crud/CrudApiProducto';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\nfunction Store() {\r\n    const API = helpFetch()\r\n    const [editData, setEditData] = useState(null)\r\n    const [productsAPI, setProducts] = useState([''])\r\n    const [loading, setLoading] = useState(false)\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const { products } = data;\r\n    const [cartItems, setCartItems] = useState([]);\r\n    const [busqueda, setBusqueda] = useState(\"\");\r\n    const handleChange = e => {\r\n        setBusqueda(e.target.value);\r\n        filtrar(e.target.value);\r\n    }\r\n    const filtrar = (terminoBusqueda) => {\r\n        var resultadosBusqueda = productsAPI.filter((elemento) => {\r\n            if (elemento.name.toString().toLowerCase().includes(terminoBusqueda.toLowerCase())\r\n                || elemento.price.toString().toLowerCase().includes(terminoBusqueda.toLowerCase())\r\n            ) {\r\n                return elemento;\r\n            }\r\n        });\r\n        setProducts(resultadosBusqueda);\r\n    }\r\n    const addProduct = (product) => {\r\n        setLoading(true)\r\n        const options = {\r\n            body: product\r\n        }\r\n\r\n        API.post(\"products\", options).then(response => {\r\n            if (!response.error) {\r\n                setProducts([...productsAPI, product])\r\n                setErrorMessage(null)\r\n            } else {\r\n                setProducts(null)\r\n                setErrorMessage(response.statusText)\r\n            }\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    // editar un producto\r\n    const editProduct = (product) => {\r\n        setLoading(true)\r\n        const options = {\r\n            body: product\r\n        }\r\n\r\n        API.put(\"products\", options, product.id).then(response => {\r\n            if (!response.error) {\r\n                const newProducts = productsAPI.map(el => el.id === product.id ? product : el)\r\n                setProducts(newProducts)\r\n                setEditData(null)\r\n                setErrorMessage(null)\r\n            } else {\r\n                setProducts(null)\r\n                setErrorMessage(response.statusText)\r\n            }\r\n\r\n            setLoading(false)\r\n        })\r\n    }\r\n    // Eliminar un product\r\n    const deleteProduct = id => {\r\n        setLoading(true)\r\n        const isDelete = window.confirm(`¿Deseas eliminar el registro con id: ${id}?`)\r\n\r\n        if (isDelete) {\r\n            API.del(\"products\", id).then(response => {\r\n                if (!response.error) {\r\n                    const newProducts = productsAPI.filter(el => el.id !== id)\r\n                    setProducts(newProducts)\r\n                    setErrorMessage(null)\r\n                } else {\r\n                    setProducts(null)\r\n                    setErrorMessage(response.statusText)\r\n                }\r\n\r\n                setLoading(false)\r\n            })\r\n        } else {\r\n            setLoading(false)\r\n        }\r\n    }\r\n    const onAdd = (product) => {\r\n        const exist = cartItems.find((x) => x.id === product.id);\r\n        if (exist) {\r\n            setCartItems(\r\n                cartItems.map((x) =>\r\n                    x.id === product.id ? { ...exist, qty: exist.qty + 1 } : x\r\n                )\r\n            );\r\n        } else {\r\n            setCartItems([...cartItems, { ...product, qty: 1 }]);\r\n        }\r\n    };\r\n    const onRemove = (product) => {\r\n        const exist = cartItems.find((x) => x.id === product.id);\r\n        if (exist.qty === 1) {\r\n            setCartItems(cartItems.filter((x) => x.id !== product.id));\r\n        } else {\r\n            setCartItems(\r\n                cartItems.map((x) =>\r\n                    x.id === product.id ? { ...exist, qty: exist.qty - 1 } : x\r\n                )\r\n            );\r\n        }\r\n    };\r\n    \r\n    useEffect(() => {\r\n        setLoading(true)\r\n        API.get(\"products\").then((response) => {\r\n            if (!response.error) {\r\n                setProducts(response)\r\n                setErrorMessage(null)\r\n            } else {\r\n                setProducts(null)\r\n                setErrorMessage(response.statusText)\r\n            }\r\n            setLoading(false)\r\n        })\r\n    }, [])\r\n    return (\r\n        <div className=\"App\">\r\n            <Header countCartItems={cartItems.length}></Header>\r\n            <Form className=\"d-flex\">\r\n                <input\r\n                    className=\"form-control inputBuscar\"\r\n                    value={busqueda}\r\n                    placeholder=\"Búsqueda por nombre o precio\"\r\n                    onChange={handleChange}\r\n                />\r\n            </Form>\r\n            <div className=\"row\">\r\n                <Basket\r\n                    cartItems={cartItems}\r\n                    onAdd={onAdd}\r\n                    onRemove={onRemove}\r\n                ></Basket>\r\n                <CrudApiProducto/>\r\n                {/* <CrudTableProduct products={productsAPI} onAdd={onAdd} /> */}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Store;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}