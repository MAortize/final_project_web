{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\Nueva carpeta (2)\\\\definitivo_signodePregunta\\\\WebDevelopment\\\\Proyecto\\\\arepasApp\\\\src\\\\components\\\\crud\\\\CrudApiProducto.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport CrudFormProduct from './CrudFormProduct';\nimport CrudTableProduct from './CrudTableProduct';\nimport Loader from './Loader';\nimport Message from './Message';\nimport { helpFetch } from '../../helpers/helpFetch';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CrudApiProducto = () => {\n  _s();\n  const API = helpFetch();\n  const [editData, setEditData] = useState(null);\n  const [products, setProducts] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  useEffect(() => {\n    setLoading(true);\n    API.get(\"products\").then(response => {\n      if (!response.error) {\n        setProducts(response);\n        setErrorMessage(null);\n      } else {\n        setProducts(null);\n        setErrorMessage(response.statusText);\n      }\n      setLoading(false);\n    });\n  }, []);\n\n  // inserción de datos\n  const addProduct = product => {\n    setLoading(true);\n    const options = {\n      body: product\n    };\n    API.post(\"products\", options).then(response => {\n      if (!response.error) {\n        setProducts([...products, product]);\n        setErrorMessage(null);\n      } else {\n        setProducts(null);\n        setErrorMessage(response.statusText);\n      }\n      setLoading(false);\n    });\n  };\n\n  // editar un producto\n  const editProduct = product => {\n    setLoading(true);\n    const options = {\n      body: product\n    };\n    API.put(\"products\", options, product.id).then(response => {\n      if (!response.error) {\n        const newProducts = products.map(el => el.id === product.id ? product : el);\n        setProducts(newProducts);\n        setEditData(null);\n        setErrorMessage(null);\n      } else {\n        setProducts(null);\n        setErrorMessage(response.statusText);\n      }\n      setLoading(false);\n    });\n  };\n\n  // Eliminar un product\n  const deleteProduct = id => {\n    setLoading(true);\n    const isDelete = window.confirm(`¿Deseas eliminar el registro con id: ${id}?`);\n    if (isDelete) {\n      API.del(\"products\", id).then(response => {\n        if (!response.error) {\n          const newProducts = products.filter(el => el.id !== id);\n          setProducts(newProducts);\n          setErrorMessage(null);\n        } else {\n          setProducts(null);\n          setErrorMessage(response.statusText);\n        }\n        setLoading(false);\n      });\n    } else {\n      setLoading(false);\n    }\n  };\n  // Aqui se usan los otros componentes para tener un visual\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"CRUD API de Productos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(CrudFormProduct, {\n      addProduct: addProduct,\n      editProduct: editProduct,\n      editData: editData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this) : products && /*#__PURE__*/_jsxDEV(CrudTableProduct, {\n      products: products\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(Message, {\n      text: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true);\n};\n_s(CrudApiProducto, \"+p4XlPWATQ0q7pa1Owo739NPyJo=\");\n_c = CrudApiProducto;\nexport default CrudApiProducto;\nvar _c;\n$RefreshReg$(_c, \"CrudApiProducto\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","CrudFormProduct","CrudTableProduct","Loader","Message","helpFetch","CrudApiProducto","API","editData","setEditData","products","setProducts","loading","setLoading","errorMessage","setErrorMessage","get","then","response","error","statusText","addProduct","product","options","body","post","editProduct","put","id","newProducts","map","el","deleteProduct","isDelete","window","confirm","del","filter"],"sources":["C:/Users/Usuario/Desktop/Nueva carpeta (2)/definitivo_signodePregunta/WebDevelopment/Proyecto/arepasApp/src/components/crud/CrudApiProducto.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport CrudFormProduct from './CrudFormProduct'\r\nimport CrudTableProduct from './CrudTableProduct'\r\nimport Loader from './Loader'\r\nimport Message from './Message'\r\nimport { helpFetch } from '../../helpers/helpFetch'\r\n\r\nconst CrudApiProducto = () => {\r\n\r\n  const API = helpFetch()\r\n  const [editData, setEditData] = useState(null)\r\n  const [products, setProducts] = useState(null)\r\n  const [loading, setLoading] = useState(false)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    API.get(\"products\").then((response) => {\r\n      if (!response.error) {\r\n        setProducts(response)\r\n        setErrorMessage(null)\r\n      } else {\r\n        setProducts(null)\r\n        setErrorMessage(response.statusText)\r\n      }\r\n\r\n      setLoading(false)\r\n    })    \r\n  }, [])\r\n\r\n  // inserción de datos\r\n  const addProduct = (product) => {\r\n    setLoading(true)\r\n    const options = {\r\n      body: product\r\n    }\r\n\r\n    API.post(\"products\", options).then(response => {\r\n      if (!response.error) {\r\n        setProducts([...products, product])\r\n        setErrorMessage(null)\r\n      } else {\r\n        setProducts(null)\r\n        setErrorMessage(response.statusText)\r\n      }\r\n      setLoading(false)\r\n    })\r\n  }\r\n\r\n  // editar un producto\r\n  const editProduct = (product) => {\r\n    setLoading(true)\r\n    const options = {\r\n      body: product\r\n    }\r\n\r\n    API.put(\"products\", options, product.id).then(response => {\r\n      if (!response.error) {\r\n        const newProducts = products.map(el => el.id === product.id ? product : el)\r\n        setProducts(newProducts)\r\n        setEditData(null)\r\n        setErrorMessage(null)\r\n      } else {\r\n        setProducts(null)\r\n        setErrorMessage(response.statusText)\r\n      }\r\n\r\n      setLoading(false)\r\n    })\r\n  }\r\n\r\n  // Eliminar un product\r\n  const deleteProduct = id => {\r\n    setLoading(true)\r\n    const isDelete = window.confirm(`¿Deseas eliminar el registro con id: ${id}?`)\r\n\r\n    if (isDelete) {\r\n      API.del(\"products\", id).then( response => {\r\n        if (!response.error) {\r\n          const newProducts = products.filter(el => el.id !== id)\r\n          setProducts(newProducts)\r\n          setErrorMessage(null)\r\n        } else {\r\n          setProducts(null)\r\n          setErrorMessage(response.statusText)\r\n        }\r\n  \r\n        setLoading(false)\r\n      })\r\n    } else {\r\n      setLoading(false)\r\n    }\r\n  }\r\n  // Aqui se usan los otros componentes para tener un visual\r\n  return <>\r\n    <h2>CRUD API de Productos</h2>\r\n    <CrudFormProduct addProduct={addProduct} editProduct={editProduct} editData={editData}/>\r\n    { \r\n      loading\r\n      ? <Loader />\r\n      : products && <CrudTableProduct products={products} /> \r\n    }\r\n    { errorMessage && <Message text={errorMessage}/> }\r\n  </>\r\n}\r\n\r\nexport default CrudApiProducto"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}